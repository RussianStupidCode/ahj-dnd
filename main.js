(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var n=s.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();let e={};const s=new WeakMap,n={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};class i{constructor(t,i){i=Object.assign({units:"metric",precision:1,locale:void 0},e,i),s.set(this,i),Object.assign(n,i.customUnits);const o=t<0?"-":"";t=Math.abs(t);const a=n[i.units];if(!a)throw new Error(`Invalid units specified: ${i.units}`);{const e=a.find((e=>t>=e.from&&t<e.to));if(e){const s=new Intl.NumberFormat(i.locale,{style:"decimal",minimumFractionDigits:i.precision,maximumFractionDigits:i.precision}),n=0===e.from?o+t:o+s.format(t/e.from);this.value=n,this.unit=e.unit,this.long=e.long}else this.value=o+t,this.unit="",this.long=""}}toString(){const t=s.get(this);return t.toStringFn?t.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function o(t,e){return new i(t,e)}o.defaultOptions=function(t){e=t};const a=o,l=t.p+"ee60d89348321813bd33a38eaf278f66.pdf",d=t.p+"b92a4f88b0f115ed597c61083f5466a7.pdf",r=t.p+"1e4f82e6c9fe01332a9535515c4fd7bc.pdf";class c{constructor(t,e,s,n){this.downloadCallback=n,this.src=t,this.downloadName=s,this.el=document.createElement("tr"),this.blob=null,this.el.innerHTML=`\n    <td><span class="badge bg-primary">${e}</span></td>\n    <td><span class="item-size badge bg-primary"></span></td>\n    <td><button class="btn btn-success">download</button></td>\n    `,this.sizeElement=this.el.querySelector(".item-size"),this.downloadButton=this.el.querySelector("button"),this.downloadRef=document.createElement("a"),this.downloadRef.download=s,this.downloadRef.href=t,this.setFileSize(),this.setListeners()}setListeners(){this.downloadButton.addEventListener("click",(t=>{var e;t.preventDefault(),this.downloadRef.click(),null===(e=this.downloadCallback)||void 0===e||e.call(this,this.blob)}))}setFileSize(){fetch(this.src).then((t=>t.blob())).then((t=>{this.blob=t,this.sizeElement.textContent=a(t.size)}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class h{constructor(t){this.downloadCallback=t,this.el=document.createElement("div"),this.el.classList.add("available-files"),this.el.innerHTML='\n    <span class="align-self-start badge bg-secondary my-1">Available files</span>\n    <table class="table">\n      <thead>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n    ',this.files=[["storage standard",l,"storage_standard.pdf"],["streams standard",d,"streams_standard.pdf"],["XMLHttpRequest standard",r,"XMLHttpRequest_standard.pdf"]].map((e=>{let[s,n,i]=e;return new c(n,s,i,t)}));const e=this.el.querySelector("tbody");this.files.forEach((t=>{t.bindToDOM(e)}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class u{constructor(){this.el=document.createElement("div"),this.el.classList.add("download-manager"),this.availableFiles=new h(this.addLoadSize.bind(this)),this.availableFiles.bindToDOM(this.el),this.currentDownloadBytes=0,this.alreadyDownloadElement=document.createElement("span"),this.alreadyDownloadElement.classList.add("align-self-start","badge","bg-warning","my-1"),this.alreadyDownloadElement.textContent="You've already download: 0 b",this.el.insertAdjacentElement("beforeEnd",this.alreadyDownloadElement)}addLoadSize(t){this.currentDownloadBytes+=t.size,this.alreadyDownloadElement.textContent=`You've already download: ${a(this.currentDownloadBytes)}`}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}const m=t.p+"4abca05b627d4b4e593e.png";class f{constructor(t,e,s,n){this.id=s,this.el=document.createElement("div"),this.el.classList.add("gallery-card"),this.el.dataset.title=t,this.el.dataset.id=s;const i=document.createElement("span");i.textContent=t;const o=document.createElement("img");o.setAttribute("src",e),o.classList.add("gallery-img"),o.addEventListener("load",(()=>{null==n||n()}));const a=document.createElement("div");a.classList.add("card-close-button"),a.innerHTML=`<img src="${m}" class="close-img">`,this.el.insertAdjacentElement("beforeEnd",i),this.el.insertAdjacentElement("beforeEnd",o),this.el.insertAdjacentElement("beforeEnd",a)}remove(){this.el.remove()}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}get title(){return this.el.dataset.title}}class p{constructor(t){this.currentCardId=0,this.el=document.createElement("div"),this.el.classList.add("gallery-card-list"),this.CardClass=t,this.cards={},this.setListeners()}setListeners(){this.el.addEventListener("click",(t=>{const{target:e}=t,s=e.closest(".card-close-button"),n=e.closest(".gallery-card");s&&this.removeCard(n.dataset.id)}))}add(t,e,s){const n=new this.CardClass(t,e,this.currentCardId,s);this.cards[this.currentCardId]=n,n.bindToDOM(this.el),this.currentCardId+=1}removeCard(t){const e=this.cards[t];e&&(e.remove(),delete this.cards[t])}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class b{constructor(t){this.el=document.createElement("div"),this.el.classList.add("dnd-block");const e=document.createElement("div");e.classList.add("dnd-title"),e.textContent=t,this.input=document.createElement("input"),this.input.type="file",this.input.classList.add("dnd-file-input"),this.input.accept="image/png, image/jpeg",this.el.insertAdjacentElement("beforeEnd",e),this.el.insertAdjacentElement("beforeEnd",this.input),this.filesList=[],this.setListeners()}setListeners(){this.el.addEventListener("click",(()=>{this.input.click()})),this.input.addEventListener("change",(()=>{var t;this.filesList=this.input.files,null===(t=this.createCallback)||void 0===t||t.call(this)})),this.el.addEventListener("dragover",(t=>{t.preventDefault()})),this.el.addEventListener("drop",(t=>{var e;t.preventDefault(),this.filesList=t.dataTransfer.files,null===(e=this.createCallback)||void 0===e||e.call(this)}))}get files(){return this.filesList}reset(){this.input.value=null}addCreateCallback(t){this.createCallback=t}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class E{constructor(t,e){this.el=document.createElement("div"),this.el.classList.add("gallery"),this.dndBlock=new b("Drag and Drop files here or click to select"),this.cardList=new t(e),this.dndBlock.bindToDOM(this.el),this.cardList.bindToDOM(this.el),this.setListeners()}createCard(){const[t]=this.dndBlock.files;if(!/\.(png|svg|jpg|jpeg|gif)$/i.test(t.name))return;const e=URL.createObjectURL(t);this.cardList.add(t.name,e,(()=>{URL.revokeObjectURL(e)})),this.dndBlock.reset()}setListeners(){this.dndBlock.addCreateCallback((()=>{this.createCard()}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.type=t,this.el=document.createElement("div"),this.el.classList.add("task-content"),this.el.textContent=e}toObject(){return{type:this.type,content:this.el.textContent}}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class v{static fromObject(t){const e=new v(t.id),{content:s}=t;return e.setContent(new g(s.type,s.content)),e}constructor(t){this.id=t,this.el=document.createElement("div"),this.el.classList.add("task"),this.el.dataset.id=t,this.deleteButton=document.createElement("button"),this.deleteButton.classList.add("btn","btn-danger","task-delete-btn"),this.deleteButton.innerHTML="<span>x</span>",this.el.insertAdjacentElement("beforeEnd",this.deleteButton),this.taskContent=null}setContent(t){void 0!==t&&(this.taskContent=t,this.taskContent.bindToDOM(this.el))}toObject(){return this.taskContent?{id:this.id,content:this.taskContent.toObject()}:{content:null}}remove(){this.el.remove()}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class k{constructor(){this.addCallback=null,this.el=document.createElement("div"),this.el.classList.add("task-add-block"),this.openFormButton=document.createElement("button"),this.openFormButton.classList.add("btn","btn-primary","p-1","m-1"),this.openFormButton.textContent="+ add task",this.addForm=document.createElement("div"),this.addForm.classList.add("d-flex","flex-column","align-items-center","d-none"),this.input=document.createElement("textarea"),this.input.classList.add("form-control"),this.input.rows=3;const t=document.createElement("div");t.classList.add("d-flex"),this.addButton=document.createElement("button"),this.addButton.classList.add("btn","btn-success","p-1","m-1"),this.addButton.textContent="Add task",this.showFormButton=document.createElement("button"),this.showFormButton.classList.add("btn","btn-warning","p-1","m-1"),this.showFormButton.textContent="X",t.insertAdjacentElement("beforeEnd",this.addButton),t.insertAdjacentElement("beforeEnd",this.showFormButton),this.addForm.insertAdjacentElement("beforeEnd",this.input),this.addForm.insertAdjacentElement("beforeEnd",t),this.el.insertAdjacentElement("beforeEnd",this.openFormButton),this.el.insertAdjacentElement("beforeEnd",this.addForm),this.setListeners()}setAddCallback(t){this.addCallback=t}setListeners(){this.openFormButton.addEventListener("click",(t=>{t.preventDefault(),this.openFormButton.classList.add("d-none"),this.addForm.classList.remove("d-none"),this.input.value=""})),this.showFormButton.addEventListener("click",(t=>{t.preventDefault(),this.openFormButton.classList.remove("d-none"),this.addForm.classList.add("d-none")})),this.addButton.addEventListener("click",(t=>{t.preventDefault();const e=this.input.value.trim();var s;e.length>0&&(null===(s=this.addCallback)||void 0===s||s.call(this,e),this.showFormButton.click()),this.input.value=""}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class w{static fromObject(t){const e=new w(t.title);return t.tasks.forEach((t=>{const s=v.fromObject(t);e.tasks.push(s),s.bindToDOM(e.taskColumnContent)})),e}constructor(t){this.trelloState=null,this.el=document.createElement("div"),this.el.classList.add("task-column"),this.el.dataset.title=t,this.emptyElement=null;const e=document.createElement("div");e.classList.add("task-column-title"),e.textContent=t,this.taskColumnContent=document.createElement("div"),this.taskColumnContent.classList.add("task-column-content"),this.el.insertAdjacentElement("beforeEnd",e),this.el.insertAdjacentElement("beforeEnd",this.taskColumnContent),this.addButton=new k,this.addButton.bindToDOM(this.el),this.tasks=[],this.setListeners()}setTrelloState(t){this.trelloState=t,this.addButton.setAddCallback((t=>{const e=new v(this.trelloState.maxId);this.trelloState.maxId+=1,e.setContent(new g("text",t)),this.addTask(e)}))}setListeners(){this.el.addEventListener("click",(t=>{t.preventDefault();const{target:e}=t,s=null==e?void 0:e.closest(".task-delete-btn");if(s){const t=s.closest(".task");this.deleteTask(Number(t.dataset.id))}})),this.taskColumnContent.addEventListener("mouseleave",(()=>{this.deleteEmptyElement()}))}addTask(t){var e;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"before",n=arguments.length>2?arguments[2]:void 0;var i;if(void 0===n)return this.tasks.push(t),t.bindToDOM(this.taskColumnContent),void(null===(i=this.trelloState)||void 0===i||i.saveState());const o=this.tasks.findIndex((t=>t.el===n));"before"===s?(this.taskColumnContent.insertBefore(t.el,n),this.tasks.splice(o,0,t)):(this.taskColumnContent.insertBefore(t.el,n.nextSibling),this.tasks.splice(o+1,0,t)),null===(e=this.trelloState)||void 0===e||e.saveState()}addEmptyElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"before",s=arguments.length>2?arguments[2]:void 0;s||this.taskColumnContent.append(t),"before"===e?this.taskColumnContent.insertBefore(t,s):this.taskColumnContent.insertBefore(t,s.nextSibling),this.emptyElement=t}deleteEmptyElement(){var t;null===(t=this.emptyElement)||void 0===t||t.classList.add("d-none")}deleteTask(t){var e;const s=this.tasks.findIndex((e=>e.id===t));this.tasks[s].remove(),this.tasks.splice(s,1),null===(e=this.trelloState)||void 0===e||e.saveState()}extractTask(t){var e;const s=this.tasks.findIndex((e=>e.id===t));this.tasks.splice(s,1),null===(e=this.trelloState)||void 0===e||e.saveState()}getTask(t){return this.tasks.find((e=>e.id===t))}toObject(){return{title:this.el.dataset.title,tasks:this.tasks.map((t=>t.toObject()))}}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}class y{constructor(t){var e,s;let n=null;t.getItem("trello")&&(n=JSON.parse(t.getItem("trello"))),this.state={maxId:(null===(e=n)||void 0===e?void 0:e.maxId)||0,saveState:()=>{const e={taskColumn:Object.fromEntries(Object.entries(this.taskColumns).map((t=>[t[0],t[1].toObject()]))),maxId:this.state.maxId};t.setItem("trello",JSON.stringify(e))}},this.el=document.createElement("div"),this.el.classList.add("trello"),this.dndBuffer=null,this.previouseMousePosition=null,this.dndOriginalElement=null,this.dndTaskColumn=null,this.emptyElement=document.createElement("div"),this.emptyElement.classList.add("empty-element"),null!==(s=n)&&void 0!==s&&s.taskColumn?this.taskColumns=Object.fromEntries(Object.entries(n.taskColumn).map((t=>[t[0],w.fromObject(t[1])]))):this.taskColumns={TODO:new w("TODO"),"IN PROGRESS":new w("IN PROGRESS"),DONE:new w("DONE")},this.lastSaveMouseData={taskColumn:null,taskElement:null,position:null},Object.values(this.taskColumns).forEach((t=>{t.bindToDOM(this.el),t.setTrelloState(this.state)})),this.setListeners()}setListeners(){this.el.addEventListener("mouseleave",(()=>{var t,e;null===(t=this.dndBuffer)||void 0===t||t.remove(),this.dndBuffer=null,this.previouseMousePosition=null,this.dndOriginalElement=null,this.el.style.cursor="pointer",null===(e=this.lastSaveMouseData.taskColumn)||void 0===e||e.deleteEmptyElement(),this.lastSaveMouseData.taskElement=null})),this.el.addEventListener("mouseover",(t=>{const{target:e}=t;if(!this.dndBuffer)return;const s=e.closest(".task"),n=e.closest(".task-column");if(!n)return;const i=this.taskColumns[n.dataset.title];if(this.emptyElement.style.width=`${this.dndOriginalElement.offsetWidth}px`,this.emptyElement.style.height=`${this.dndOriginalElement.offsetHeight}px`,this.lastSaveMouseData.taskColumn=i,0===i.tasks.length)return this.emptyElement.classList.remove("d-none"),i.addEmptyElement(this.emptyElement),void(this.lastSaveMouseData.taskElement=null);if(!s||this.dndOriginalElement===s)return;const{pageY:o}=t,{top:a}=s.getBoundingClientRect(),l=a+window.scrollY+s.offsetHeight/2>o?"before":"after";var d;s!==this.lastSaveMouseData.taskColumn&&l!==this.lastSaveMouseData.position&&(null===(d=this.lastSaveMouseData.taskColumn)||void 0===d||d.deleteEmptyElement(),this.emptyElement.classList.remove("d-none"),i.addEmptyElement(this.emptyElement,l,s)),this.lastSaveMouseData.taskElement=s})),this.el.addEventListener("mousemove",(t=>{if(!this.dndBuffer)return;t.preventDefault();const{pageX:e,pageY:s}=t,n=e-this.previouseMousePosition.pageX,i=s-this.previouseMousePosition.pageY,o=Number(this.dndBuffer.style.top.replace("px","")),a=Number(this.dndBuffer.style.left.replace("px",""));this.dndBuffer.style.top=`${o+i}px`,this.dndBuffer.style.left=`${a+n}px`,this.previouseMousePosition.pageX=e,this.previouseMousePosition.pageY=s})),this.el.addEventListener("mousedown",(t=>{const{target:e}=t,s=e.closest(".task"),n=e.closest(".task-delete-btn");if(s&&!n){const n=e.closest(".task-column");this.dndTaskColumn=this.taskColumns[n.dataset.title];const{pageX:i,pageY:o}=t;this.previouseMousePosition={pageX:i,pageY:o},this.dndOriginalElement=s,this.dndBuffer=s.cloneNode(!0),this.dndBuffer.classList.remove("task"),this.dndBuffer.classList.add("task-shadow"),this.dndBuffer.style.width=`${this.dndOriginalElement.offsetWidth}px`,this.dndBuffer.style.height=`${this.dndOriginalElement.offsetHeight}px`;const{left:a,top:l}=this.dndOriginalElement.getBoundingClientRect();this.dndBuffer.style.top=`${l+window.scrollY}px`,this.dndBuffer.style.left=`${a+window.scrollX}px`,this.el.append(this.dndBuffer),this.el.style.cursor="grabbing"}})),this.el.addEventListener("mouseup",(t=>{var e,s;const{taskElement:n}=this.lastSaveMouseData;if(this.dndBuffer){const e=Number(this.dndOriginalElement.dataset.id),s=this.dndTaskColumn.getTask(e);if(n){const{pageY:e}=t,{top:i}=n.getBoundingClientRect(),o=i+window.scrollY+n.offsetHeight/2>e?"before":"after";this.lastSaveMouseData.taskColumn.addTask(s,o,n)}else this.lastSaveMouseData.taskColumn.addTask(s);this.dndTaskColumn.extractTask(e)}null===(e=this.dndBuffer)||void 0===e||e.remove(),this.dndBuffer=null,this.previouseMousePosition=null,this.dndOriginalElement=null,this.el.style.cursor="pointer",null===(s=this.lastSaveMouseData.taskColumn)||void 0===s||s.deleteEmptyElement(),this.lastSaveMouseData.taskElement=null}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}const M=document.querySelector(".controls"),C=document.querySelector(".field");function L(t,e,s){const n=document.createElement("button");n.classList.add("btn","bg-primary","text-white","m-2","p-2",e),n.textContent=t,n.addEventListener("click",(t=>{C.innerHTML="",s(t)})),M.insertAdjacentElement("beforeEnd",n)}L("trello (#1)","trello-start-button",(()=>{C.innerHTML="",new y(window.localStorage).bindToDOM(C)})),L("gallery (#2)","gallery-start-button",(()=>{C.innerHTML="",new E(p,f).bindToDOM(C)})),L("download-manager (#3)","download-start-button",(()=>{C.innerHTML="",(new u).bindToDOM(C)}))})();